@{
    ViewData["Title"] = "EditarSeguimiento";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model Siscan_Vc_AppWeb.Models.ViewModels.Viewmodelsegui

<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-7">
            <div class="card shadow-lg border-0 rounded-lg mt-5">
                <div class="card-header fondomenu ">
                    <h3 class="text-center font-dark-light my-4">Seguimiento</h3>
                </div>
                <form asp-controller="Seguimiento" asp-action="EditarSeguimiento">
                    <div class="card-body">
                        @if (TempData["MensajeSeguimientoActualizado"] != null)
                        {
                            <div class="alert alert-success" role="alert"> @TempData["MensajeSeguimientoActualizado"] </div>
                            <script>
                                setTimeout(function () {
                                    window.location.href = '@Url.Action("Consultar", "Seguimiento")';
                                }, 3000);
                            </script>
                        }
                        @if (TempData["MensajeEmpresaNoExistSegui"] != null)
                        {
                            <div class="alert alert-danger" role="alert">@TempData["MensajeEmpresaNoExistSegui"] </div>
                        }
                        @if (TempData["MensajeInstructorNoExistSegui"] != null)
                        {
                            <div class="alert alert-danger" role="alert">@TempData["MensajeInstructorNoExistSegui"] </div>
                        }
                        @*datos del aprendiz*@
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input style="display:none" asp-for="seguimientoinstructorAprendiz.IdSeguimiento" class="form-control" id="inputIdSeguimiento" type="text" readonly />
                                <label asp-for="seguimientoinstructorAprendiz.IdSeguimiento">Id Seguimiento</label>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input asp-for="aprendiz.IdTipodocumentoNavigation.TipoDocumento1" class="form-control" id="inputDocumento" type="text" readonly />
                                    <label asp-for="aprendiz.IdTipodocumentoNavigation.TipoDocumento1">Tipo Documento</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3 mb-md-0">
                                    <input asp-for="aprendiz.NumeroDocumentoAprendiz" class="form-control" id="inputDocumento" type="text" readonly />
                                    <label asp-for="aprendiz.NumeroDocumentoAprendiz">Numero de documento</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3 mb-md-0">
                                    <input readonly asp-for="aprendiz.NombreAprendiz" class="form-control" id="inputNombre" type="text" placeholder="Ingresa tus nombres" />
                                    <label asp-for="aprendiz.NombreAprendiz">Nombres</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input readonly asp-for="aprendiz.ApellidoAprendiz" class="form-control" id="inputApellidos" type="text" placeholder="Ingresa tus apellidos" />
                                    <label asp-for="aprendiz.ApellidoAprendiz">Apellidos</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--datos de empresa-->
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-md-6">                                
                                <div id="dvinputEmpresa" class="form-floating mb-3">
                                    <input asp-for="seguimientoinstructorAprendiz.NitEmpresa" class="form-control" id="inputEmpresa" type="text" placeholder="Digite el nit de la Empresa">
                                    <label asp-for="seguimientoinstructorAprendiz.NitEmpresa" class="form-label">Digite el Nit de la Empresa</label>
                                </div>

                                <div id="dvinputNitPoryecto" class="form-floating mb-3">
                                    <input asp-for="seguimientoinstructorAprendiz.NitProyecto" class="form-control" id="inputNitPoryecto" type="text" placeholder="Digite el nit del proyecto">
                                    <label asp-for="seguimientoinstructorAprendiz.NitProyecto" class="form-label">Digite el Nit del proyecto</label>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <select asp-for="seguimientoinstructorAprendiz.IdModalidad" asp-items="@(new SelectList(ViewBag.ItemsModalidad,"IdModalidad","NombreModalidad"))" class="form-control form-control-sm" id="cboModalidad">
                                        <option>Selecciona una Modalidad...</option>
                                    </select>
                                    <label asp-for="seguimientoinstructorAprendiz.IdModalidad">Modalidad Practicas</label>
                                </div>
                            </div>

                            <div id="dvIptNombreProyecto" class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input asp-for="seguimientoinstructorAprendiz.NombreProyecto" class="form-control" id="inputNomProyecto" style="width:340px;" type="text" placeholder="Digite el nombre del proyecto" />
                                    <label asp-for="seguimientoinstructorAprendiz.NombreProyecto" class="form-label">Nombre del Proyecto</label>
                                </div>
                            </div>

                            <div id="dvIptObjetivoProyecto" class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input asp-for="seguimientoinstructorAprendiz.ObjetivoProyecto" class="form-control" id="inputObjProyecto" style="width:340px;" type="text" placeholder="Digite objetivo del proyecto" />
                                    <label asp-for="seguimientoinstructorAprendiz.ObjetivoProyecto" class="form-label">Objetivo del Proyecto</label>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input asp-for="seguimientoinstructorAprendiz.FechaInicio" class="form-control" id="FechaInicio" type="date" placeholder="name@example.com" />
                                    <label asp-for="seguimientoinstructorAprendiz.FechaInicio">Inicio</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input asp-for="seguimientoinstructorAprendiz.FechaFinalizacion" class="form-control" id="FechaFinal" type="date" placeholder="name@example.com" />
                                    <label asp-for="seguimientoinstructorAprendiz.FechaFinalizacion">Finaliza</label>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <select asp-for="seguimientoinstructorAprendiz.IdAreaEmpresa" asp-items="@(new SelectList(ViewBag.Itemsareaempresa,"IdArea","NombreArea"))" class="form-control form-control-sm" id="cboAsignacionArea">
                                        <option value="">Selecciona un Area...</option>
                                    </select>
                                    <label asp-for="seguimientoinstructorAprendiz.IdAreaEmpresa">Area de Practicas</label>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input asp-for="seguimientoinstructorAprendiz.FechaRealizacionSeguimiento" type="date" class="form-control" id="fechaRealizacion" />
                                    <label asp-for="seguimientoinstructorAprendiz.FechaRealizacionSeguimiento">Fecha de realizacion</label>
                                </div>
                            </div>
                            <div class="row mb-3">
                               
                                <!-- Coformador -->
                                <div class="fondomenu py-3 px-5">
                                    <h6 class="m-0 text-center font-dark-light text-white "> coformador</h6>
                                </div>
                                <br />
                                <div class="form-floating mb-3 mb-md-0 py-3">
                                    <div class="form-floating mb-3">
                                        <select asp-for="seguimientoinstructorAprendiz.IdCoformador" asp-items="@(new SelectList(ViewBag.Itemscooformador,"IdCoformador","NombreCoformador"))" class="form-control form-control-sm" id="cbocoformador">
                                            <option value="">Selecciona un Coformador...</option>
                                        </select>
                                        <label asp-for="seguimientoinstructorAprendiz.IdCoformador">Coformador</label>
                                    </div>
                                </div>
                                <!-- Instructor-->
                                <div class="fondomenu py-3 px-5">
                                    <h6 class="m-0 text-center font-dark-light text-white">Instructor</h6>
                                </div>
                                <br />
                                <div class="form-floating mb-3 mb-md-0 py-3">
                                    <div class="col-md-6">                                       
                                        <div class="form-floating">
                                            <input asp-for="seguimientoinstructorAprendiz.NumeroDocumentoInstructor" class="form-control" id="inputInstructor" type="text" placeholder="Numero Documento Instructor" />
                                            <label asp-for="seguimientoinstructorAprendiz.NumeroDocumentoInstructor">Instructor</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4 mb-0">
                                    <div class="d-grid boton2"><button type="submit" id="confirmarRegistro" class="btn text-center btn-block" style="font-size:20px" onclick="return confirmCrear()">Actualizar</button></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    <script src="~/js/scripts.js" asp-append-version="true"></script>
    <script>
        function confirmCrear() {
            return confirm("¿Estás seguro de que deseas Actualizar?");
        }


        //cambios en el formulario dependiendo de la modalidad
        let Modalidad = document.querySelector('#cboModalidad');
        let inputEmpresa = document.querySelector('#dvinputEmpresa');
        let inputPoryecto = document.querySelector('#dvinputNitPoryecto');
        let nombreProyecto = document.querySelector('#dvIptNombreProyecto');
        let objetivoProyecto = document.querySelector('#dvIptObjetivoProyecto');
        let coformador = document.querySelector('#cbocoformador');

        window.addEventListener('load', () => {
            var opciones = Modalidad.options[Modalidad.selectedIndex];

            if (opciones.text.toLowerCase() == 'proyecto productivo') {
                inputEmpresa.style.display = "none";
                coformador.disabled = true;
                inputPoryecto.style.display = "flex";
                nombreProyecto.style.display = "flex";
                objetivoProyecto.style.display = "flex";
            } else {
                inputPoryecto.style.display = "none";
                objetivoProyecto.style.display = "none";
                nombreProyecto.style.display = "none";
            }
        });
        Modalidad.addEventListener('change', () => {
            var opciones = Modalidad.options[Modalidad.selectedIndex];

            if (opciones.text.toLowerCase() == 'proyecto productivo') {
                inputEmpresa.style.display = "none";
                coformador.disabled = true;
                inputPoryecto.style.display = "flex";
                nombreProyecto.style.display = "flex";
                objetivoProyecto.style.display = "flex";
            } else {
                inputPoryecto.style.display = "none";
                objetivoProyecto.style.display = "none";
                nombreProyecto.style.display = "none";
                inputEmpresa.style.display = "flex";
                coformador.disabled = false;
            }
        });
    </script>
}
